# API エンドポイント一覧

このドキュメントでは、vuln-sns アプリケーションの全APIエンドポイントについて説明します。

## パブリックエンドポイント（認証不要）

### GET /api/health
**説明**: アプリケーションのヘルスチェック

**リクエストパラメータ**: なし

### GET /api/search
**説明**: ハッシュタグによる投稿検索

**リクエストパラメータ**:
| パラメータ名 | 型 | 必須 | 説明 |
|-------------|----|----|------|
| tag | string | ✓ | 検索するハッシュタグ（クエリパラメータ） |

### GET /api/posts
**説明**: 投稿一覧の取得

**リクエストパラメータ**: なし

### POST /api/login
**説明**: ユーザーログイン

**リクエストパラメータ**:
| パラメータ名 | 型 | 必須 | 説明 |
|-------------|----|----|------|
| user_id | string | ✓ | ユーザーID |
| password | string | ✓ | パスワード |

## 認証が必要なエンドポイント

以下のエンドポイントは、Authorizationヘッダーにトークンが必要です。

### POST /api/posts
**説明**: 新しい投稿の作成

**リクエストパラメータ**:
| パラメータ名 | 型 | 必須 | 説明 |
|-------------|----|----|------|
| content | string | ✓ | 投稿内容 |

### PUT /api/posts/:id
**説明**: 投稿の更新

**リクエストパラメータ**:
| パラメータ名 | 型 | 必須 | 説明 |
|-------------|----|----|------|
| id | string | ✓ | 投稿ID（URLパラメータ） |
| content | string | ✓ | 更新する投稿内容 |

### DELETE /api/posts/:id
**説明**: 投稿の削除

**リクエストパラメータ**:
| パラメータ名 | 型 | 必須 | 説明 |
|-------------|----|----|------|
| id | string | ✓ | 削除する投稿ID（URLパラメータ） |

### POST /api/posts/:id/like
**説明**: 投稿にいいねを追加

**リクエストパラメータ**:
| パラメータ名 | 型 | 必須 | 説明 |
|-------------|----|----|------|
| id | string | ✓ | いいねする投稿ID（URLパラメータ） |

### DELETE /api/posts/:id/like
**説明**: 投稿のいいねを削除

**リクエストパラメータ**:
| パラメータ名 | 型 | 必須 | 説明 |
|-------------|----|----|------|
| id | string | ✓ | いいねを削除する投稿ID（URLパラメータ） |

### GET /api/profile
**説明**: ユーザープロフィール情報の取得

**リクエストパラメータ**: なし

### PUT /api/profile
**説明**: プロフィール情報の更新

**リクエストパラメータ**:
| パラメータ名 | 型 | 必須 | 説明 |
|-------------|----|----|------|
| nickname | string | ✓ | 更新するニックネーム |

### POST /api/profile/avatar
**説明**: アバター画像のアップロード

**リクエストパラメータ**:
| パラメータ名 | 型 | 必須 | 説明 |
|-------------|----|----|------|
| file_id | string | ✓ | ファイルID（ウィルススキャン用） |
| image_data | string | ✓ | Base64エンコードされた画像データ |

## 認証について

認証が必要なエンドポイントでは、以下の形式でAuthorizationヘッダーを設定してください：

```
Authorization: Bearer {token}
```

トークンは `/api/login` エンドポイントでログイン成功時に取得できます。

## エラーレスポンス

各エンドポイントは以下のHTTPステータスコードを返す可能性があります：

- `200 OK`: 成功
- `201 Created`: 作成成功
- `400 Bad Request`: リクエストパラメータエラー
- `401 Unauthorized`: 認証エラー
- `404 Not Found`: リソースが見つからない
- `500 Internal Server Error`: サーバー内部エラー
